<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="board/layout/basic">
	<th:block layout:fragment="title">
		<title>list page</title>
	</th:block>

  <th:block layout:fragment="search">
<!--    <div th:replace="board/fragments/common :: search"></div>-->
    <form action="#" id="searchform-header" class="searchform js__toggle active pull-right">
      <input type="search" placeholder="Search..." class="input-search">
      <button class="mdi mdi-magnify button-search" type="submit">
        <i class="fa fa-search" aria-hidden="true"></i>
      </button>
    </form>
  </th:block>

  <th:block layout:fragment="content">
    <div class="table-responsive clearfix">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>번호</th>
            <th>제목</th>
            <th>작성자</th>
            <th>등록일</th>
            <th>조회 수</th>
          </tr>
        </thead>
				<tbody>
          <tr th:if="${not #lists.isEmpty( boardList )}" th:each="row : ${boardList}">
            <td scope="row" th:text="${#strings.equals( row.noticeYn, 'Y' ) ? '공지' : row.idx}"></td>
            <td class="text-left">
              <a th:href="@{/board/view.do( idx=${row.idx} )}" th:text="${row.title}"></a>
<!--              <a th:href="|@{/board/view.do}${params.makeQueryString(params.currentPageNo)}&idx=${row.idx}|" th:text="${row.title}"></a>-->
            </td>
            <td th:text="${row.writer}"></td>
            <td th:text="${#temporals.format( row.insertTime, 'yyyy-MM-dd' )}"></td>
            <td th:text="${row.viewCnt}"></td>
          </tr>
          <tr th:unless="${not #lists.isEmpty( boardList )}">
            <td colspan="5">조회된 결과가 없습니다.</td>
          </tr>
        </tbody>
			</table>

			<div class="btn_wrap text-right">
        <a th:href="@{/board/write.do}" class="btn btn-primary waves-effect waves-light">Write</a>
      </div>

      <p th:text=${pageMaker}></p>


      <!-- 이전 버튼 -->
      <th:block th:if="${pageMaker.prev}">
        <li class="pageMaker_btn prev">
          <a href="javascript:void(0)" th:onclick="movePage([[ ${#request.requestURI} ]], [[ ${pageMaker.cri.makeQueryString(pageMaker.pageStart - 1)} ]])">이전</a>
        </li>
      </th:block>

      <!-- 페이지 번호 -->
      <th:block th:with="pageMaker = ${pageMaker}">
        <th:block th:each="num : *{#numbers.sequence(pageMaker.pageStart, pageMaker.pageEnd)}">
          <li class="pageMaker_btn" th:classappend="${pageMaker.cri.pageNum == num} ? 'active' : ''">
            <a href="javascript:void(0)" th:text="${num}" th:onclick="movePage([[ ${#request.requestURI} ]],[[ ${pageMaker.cri.makeQueryString(num)} ]])"></a>
          </li>
        </th:block>
      </th:block>


      <!-- 다음 버튼 -->
      <th:block th:if="${pageMaker.next}">
        <li class="pageMaker_btn next">
          <a href="javascript:void(0)" th:onclick="movePage( [[ ${#request.requestURI} ]], [[ ${pageMaker.cri.makeQueryString(pageMaker.pageEnd + 1)} ]])">다음</a>
        </li>
      </th:block>

<!--      <th:block layout:fragment="paging">-->
<!--        <nav th:replace="board/fragments/common :: pagination">-->
<!--        </nav>-->
<!--      </th:block>-->
    </div>
  </th:block>
  
<!--  <th:block layout:fragment="script">-->
<!--    <script th:inline="javascript">-->
<!--      /*<![CDATA[*/-->

<!--      function movePage(uri, queryString) {-->
<!--        location.href = uri + queryString;-->
<!--      }-->
<!--      -->
<!--      function searchBoard(form) {-->
<!--          /*[- 드롭다운이 아닌 메인 검색 키워드로 검색했을 때 -]*/-->
<!--          if (isEmpty(form) == true) {-->
<!--            var searchKeyword = document.getElementById("mainSearchKeyword");-->
<!--            if (isEmpty(searchKeyword.value) == true) {-->
<!--              alert("키워드를 입력해 주세요.");-->
<!--              searchKeyword.focus();-->
<!--              return false;-->
<!--            }-->

<!--            form = document.getElementById("searchForm");-->
<!--            form.searchKeyword.value = searchKeyword.value;-->
<!--            form.submit();-->
<!--          }-->

<!--          if (isEmpty(form.searchKeyword.value) == true) {-->
<!--            alert("키워드를 입력해 주세요.");-->
<!--            form.searchKeyword.focus();-->
<!--            return false;-->
<!--          }-->
<!--        }-->
<!--        -->
<!--      /*]]>*/-->
<!--    </script>-->
<!--  </th:block>-->
    <script th:javascript>
      /* ![CDATA[ */
      function movePage(uri, queryString) {
        console.log(uri);
        console.log(queryString);

        location.href = uri + queryString;
      }
      /* ]]*/
    </script>
</html>